# <center>从服务化到云原生<center>

# 第一章、云原生

互联网架构变迁：

- 传统的三层架构模型：数据访问层、服务层、Web层；各个层所负责的具体职责；

  区分了互联网架构和企业级应用；互联网应用比企业级应用更加偏向于保持可用性；

- 分布式架构、SOA和服务化

  分布式场景的CAP定理：一致性、可用性、分区容忍性；

  SOA约等于“模块化开发+分布式计算”

  ![](C:\Users\Administrator\Desktop\临时文件\image\dubbo架构路线图.png)

  自动化运维工具的配合：

  - 自动化监控工具：Nagios、Zabbix等
  - 自动化流程工具：Puppet、Chef、Ansible、SaltStack等

- 从分布式架构到云原生

  云计算的三种基本服务类型：

  - IaaS：硬件基础服务
  - PaaS：关注软件和中间件的平台即服务
  - SaaS：关注业务应用的软件即服务

  容器的出现：使原有的基于虚拟机的云主机应用，彻底转变为更加灵活和轻量的“容器+编排调用”的云平台应用。编排调用工具：Kubernetes、Mesos、Swarm等为云原生应用提供了强有力的编排和调度能力，基于解除资源与应用程序本身的耦合限制而开发的。

  ​	分布式中间件向云原生中间件的变迁是本书的重点。

## 1.2 什么是云原生

​	Pivotal公司提出（SpringBoot和SpringCloud框架），关注重点：让应用能够利用云平台实现资源的按需分配和弹性伸缩。

无状态应用与有状态引用

![](C:\Users\Administrator\Desktop\临时文件\image\云原生十二要素.jpg)

扩展规则：

- 优先考虑API设计
- 通过遥测感知系统状态？
- 认证和授权：OAuth2认证、RBAC授权等机制

CNCF全景图：

<img src="C:\Users\Administrator\Desktop\临时文件\image\CNCF全景图.png"  />

应用程序+分布式中间件+自动化运维

应用程序+调度编排+容器+服务治理

# 第二章、远程通信

远程通信的重点：通信方式、序列化协议、透明化RPC框架；

无连接与无状态的区别；

补充：

HTTP2.0与HTTP1.1区别：

1. HTTP/2采用二进制格式而非文本格式
2. HTTP/2是完全多路复用的，而非有序并阻塞的——只需一个连接即可实现并行
3. 使用报头压缩，HTTP/2降低了开销
4. HTTP/2让服务器可以将响应主动“推送”到客户端缓存中

HTTP2.0的多路复用和HTTP1.X的长连接复用的区别：

- HTTP/1.X一次请求-响应，建立一个连接，用完关闭；每一个请求都要建立一个连接。

- HTTP1.1 pipeling解决方式为，若干个请求排队串行化单线程处理，后面的请求等待前面请求的返回才能获得执行机会，一旦有某请求超时，后续请求只能被阻塞，毫无办法，也就是人们常说的线头阻塞。

- HTTP/2多个请求可能在同一个连接上并行执行。某个请求任务耗时严重，不会影响到其他连接的正常执行

<img src="C:\Users\Administrator\Desktop\临时文件\image\HTTP2.0与HTTP1.X长连接对比.png" style="zoom:80%;" />

同步I/O与异步I/O的区别：主要关注内核数据复制到用户空间是否需要等待？

BIO对应的是阻塞同步I/O，NIO和AIO对应的都是非阻塞同步I/O



**未看完，待学完Netty后再回头来看！！！**



# 第三章、配置















